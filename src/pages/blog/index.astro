---
import { getCollection } from "astro:content";
import BaseLayout from "../../layouts/baseLayout.astro";
import { PAGE_SIZE } from "../../util";
import CommonLink from "../../components/commonLink.vue";

const posts = (await getCollection("blog")).sort(
    (a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf(),
);
const postCount = posts.length;
const pageCount = Math.ceil(postCount / PAGE_SIZE);
---

<BaseLayout>
    <div>
        pageCount: {pageCount}
    </div>
    {
        Array(pageCount)
            .fill(null)
            .map((value, index) => (
                <CommonLink href={"/blog/" + (index + 1)}>
                    {index + 1}
                </CommonLink>
            ))
    }
</BaseLayout>
